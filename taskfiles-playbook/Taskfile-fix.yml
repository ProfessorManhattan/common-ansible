---
version: '3'

tasks:
  all:
    desc: Apply automatic code formatting techniques (Prettier, Black, and Shellcheck)
    deps: [formatting, python, scripts]

  formatting:
    deps: [nodejs-dependencies]
    desc: Automatically format most files using Prettier
    cmds:
      - npm run fix:prettier

  python:
    deps: [python-requirements]
    desc: Automatically format Python files using Black
    cmds:
      - black --exclude '\.cache/|.*\.cache/|\.common/|.*\.common/|.git/|.*\.git/|node_modules/|.*node_modules/|roles/' .
    sources:
      - ./*.py
      - ./**/*.py

  scripts:
    deps: [nodejs-dependencies]
    desc: (Experimental) Automatically apply fixes to .sh files using Shellcheck
    cmds:
      - npm run fix:shellcheck
